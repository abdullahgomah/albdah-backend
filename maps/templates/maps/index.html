{% load static %}
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maps Tutorial</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/maps/style.css' %}">

    
    
    
<link
rel="stylesheet"
href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"
/>

<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>

<style>


.swiper {
    min-width: 100%; 
    height: 100%;
  }

  .swiper-slide {
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    width: fit-content !important;
  }

  .swiper-slide img {
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
</style>


</head>
<body>


    <section class="property_type">
        <div class="container">
            <div class="swiper mySwiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>
                
                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>


                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>

                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>
                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>
                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>
                    <div class="swiper-slide">
                        <a href="#" class="btn btn-solid">شقق للاإيجار</a>
                    </div>
                </div>
                <!-- <div class="swiper-pagination"></div> -->
            </div>
        </div>
    </section>

    <div id="map"></div>
    <div class="map-options"> 
        <a href="#" id="btn_satellite" class="">قمر صناعي</a>
        <a href="#" id="btn_roadmap" class="">طريق</a>
        <a href="#" id="btn_terrain" class="">تضاريس</a>
    </div>

    
    <div class="info-card">
        <div class="content">
            <h3>City Name</h3>
            <p>
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Illo non ut, dolorum deserunt labore cumque est! Libero nemo unde voluptatum!
            </p>
            <a href="#" class="btn btn-solid-success">Details</a>
            <i id="close-btn" class="fa-solid fa-xmark"></i>
        </div>

    </div>
    

    <script>

    let infoCard = document.querySelector('.info-card'); 
    let infoCardP = infoCard.querySelector('p');
    let infoCardH3 = infoCard.querySelector('h3'); 
    let infoCardCloseBtn = infoCard.querySelector('#close-btn'); 
    let mapOptions = document.querySelector('.map-options'); 
    
    
    infoCardCloseBtn.addEventListener('click', () => {
        infoCard.style.display = 'none';
        mapOptions.style.display ='flex';
    })
    
    async function initMap() {
    
        const { AdvancedMarkerElement } = await google.maps.importLibrary("marker");
    
        const map = new google.maps.Map(document.getElementById("map"), {
            mapId: "6a7f4f4e7a7f5b47",
            center: { lat: 23.885942, lng: 45.079163 }, // Coordinates for Saudi Arabia
            zoom: 6, 
            zoomControl: false, 
            // mapTypeControl: true,
            mapTypeControlOptions: {
                mapTypeIds: ['roadmap', 'terrain', 'satellite']
            },
            mapTypeId: "terrain",
            fullscreenControl: false, 
            gestureHandling: "greedy"  
        });
    
    
        const priceTag = document.createElement("div");
    
        priceTag.className = "price-tag";
        priceTag.textContent = "1030"
    
    
        {% for apartment in apartments_rent %}
        
        let position = "{{apartment.position}}"
        let long = Number(position.split(',')[0]) 
        let lat = Number(position.split(',')[1])

        
        const marker = new AdvancedMarkerElement ({
            map,
            position: { lat: lat, lng:long  },
            content: priceTag, 
            // icon: './house(1).png',
        });


    
        marker.addListener('click', function () {
            // alert(city[0]) 
            infoCard.style.display = 'block'; 
            infoCardH3.textContent = city[0]; 

            mapOptions.style.display = 'none'; 
            
        });
    

        {% endfor %} 

    
        document.querySelector("#btn_satellite").addEventListener('click', function() {
            map.setMapTypeId('satellite')
        })
    
    
        document.querySelector("#btn_roadmap").addEventListener('click', function() {
            map.setMapTypeId('roadmap')
        })
    
        document.querySelector("#btn_terrain").addEventListener('click', function() {
            map.setMapTypeId('terrain')
        })
    
    
    }
    
    
    
    window.initMap = initMap;
    // initMap(); 
    
    
    
    
    </script>

    <!-- <script src="{% static 'js/maps/app.js' %}" ></script> -->
    <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDKt6ozfNbfbA7RIWbNeIvy3Rj4NT7RpO4&callback=initMap"></script>

</body>
</html>